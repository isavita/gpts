# Mistral API

```elixir
Mix.install([
  :req,
  :json
])

api_key = System.fetch_env!("LB_MISTRAL_API_KEY")
```

## Endpoint and Headers

```elixir
headers = %{
  "Content-Type" => "application/json",
  "Accept" => "application/json",
  "Authorization" => "Bearer #{api_key}"
}

completion_url = "https://api.mistral.ai/v1/chat/completions"
```

## Mistral Tiny

```elixir
msg = """
Write me README for MIT license github repository.
That is containing my GPTs for OpenAI, also some livebooks in elixir with experiments.
I have also some info for my instruction prompts etc.
Here some of the files that I have.
Signed the README as created by "mistral-medium"
"""

payload = %{
  "model" => "mistral-medium",
  "temperature" => 0.1,
  "messages" => [
    %{
      "role" => "user",
      "content" => msg
    }
  ]
}

tiny_resp =
  Req.post!(completion_url, json: payload, headers: headers, receive_timeout: 60000).body
```

## Process the result

```elixir
content = tiny_resp["choices"] |> hd() |> get_in(["message", "content"])
content |> IO.puts()
```

<!-- livebook:{"offset":1057,"stamp":{"token":"XCP.Yv6aP3EO7VtpGof72VGcl-UTtCO-rgO9Wj7WskW_wHqEJ-m1ClvXBtnrj0t7MAh19KA8mPsNPRcqclCObiMzcNJIRMvkQ7vW8eFP3Q-I9xplZinqtcOiHq30","version":2}} -->
